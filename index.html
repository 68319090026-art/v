<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viewvi Smart Home & Security</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Kanit', sans-serif; 
            background: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed; 
            background-size: cover;
            text-align: center; padding: 20px; color: #333; 
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 30px;
            display: inline-block;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
        }
        .container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 25px; }
        .card { 
            background: white; padding: 20px; border-radius: 20px; width: 180px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 1px solid rgba(255,255,255,0.3);
        }
        .value { font-size: 2.5rem; font-weight: bold; color: #0077b6; margin: 10px 0; }
        .label { font-size: 1rem; color: #555; }
        
        /* LED & Buzzer UI */
        .status-container { display: flex; justify-content: center; gap: 30px; margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.5); border-radius: 20px; }
        .led-box { text-align: center; }
        .led {
            width: 30px; height: 30px; border-radius: 50%; margin: 10px auto;
            background-color: #333; box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
        }
        .led-red.on { background-color: #ff4d4d; box-shadow: 0 0 15px #ff4d4d; }
        .led-green.on { background-color: #4dff4d; box-shadow: 0 0 15px #4dff4d; }
        .buzzer-icon { font-size: 2rem; }
    </style>
</head>
<body>

<div class="glass-panel">
    <h1>üåä Viewvi Smart Home & Security Monitoring</h1>
    
    <div class="container">
        <div class="card">
            <div class="label">üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</div>
            <div id="temp" class="value">--</div>
            <span>¬∞C</span>
        </div>
        <div class="card">
            <div class="label">üíß ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</div>
            <div id="hum" class="value">--</div>
            <span>%</span>
        </div>
        <div class="card">
            <div class="label">üå± ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏î‡∏¥‡∏ô</div>
            <div id="soil" class="value">--</div>
            <span>%</span>
        </div>
    </div>

    <div class="status-container">
        <div class="led-box">
            <div class="label">LED ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</div>
            <div id="ledTemp" class="led led-red"></div>
        </div>
        <div class="led-box">
            <div class="label">LED ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏</div>
            <div id="ledObj" class="led led-green"></div>
        </div>
        <div class="led-box">
            <div class="label">‡∏•‡∏≥‡πÇ‡∏û‡∏á‡∏ö‡∏±‡∏ã‡πÄ‡∏ã‡∏≠‡∏£‡πå</div>
            <div id="buzzerStat" class="buzzer-icon">üîá</div>
            <div id="buzzerTxt" style="font-size: 0.8rem;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á</div>
        </div>
    </div>
</div>

<script>
    const firebaseConfig = { databaseURL: "https://viewvi-3e5ef-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    db.ref("/").on("value", (snapshot) => {
        const data = snapshot.val();
        if (data) {
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå
            document.getElementById("temp").innerText = data.temperature || "--";
            document.getElementById("hum").innerText = data.Humidity || "--";
            document.getElementById("soil").innerText = data.Soil || "--";

            // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ LED ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ (‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç > 30 ‡∏≠‡∏á‡∏®‡∏≤)
            const ledT = document.getElementById("ledTemp");
            if(data.temperature > 30) ledT.classList.add("on"); else ledT.classList.remove("on");

            // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ & LED ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ & Buzzer
            const ledO = document.getElementById("ledObj");
            const buzI = document.getElementById("buzzerStat");
            const buzT = document.getElementById("buzzerTxt");

            if (data.Security === 1) {
                ledO.classList.add("on");
                buzI.innerText = "üîä";
                buzT.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á!";
                buzT.style.color = "red";
            } else {
                ledO.classList.remove("on");
                buzI.innerText = "üîá";
                buzT.innerText = "‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á";
                buzT.style.color = "black";
            }
        }
    });
</script>

</body>
</html>
